<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>scroll-bgcolor</title>
  </head>
  <style media="screen">
    body {
      transition-property: all;
      transition-duration: 777ms;
    }
    .box {
      height: 100vh;
      text-align: center;
      font-size: 150%;
    }
  </style>
  <script src="../../js/util.js"></script>
  <script src="../../js/dollar.js"></script>
  <script>
    $(function () {
      const boxes = $('.box')

      const updateBackground = window.util.debounce(function (e) {
        for (let box of boxes) {
          if (box.offsetTop >= window.scrollY) {
            $('body')[0].style.backgroundColor = '#' + box.dataset.bgcolor
            return;
          }
        }
      }, 350)

      const loremipsum = 'kanasta kanasta kanasta kanasta kanasta kanasta kanasta kanasta kanasta kanasta\n'
      $('[id^=box]').forEach(box => {
        box.innerText += loremipsum
        box.innerText += loremipsum
        box.innerText += loremipsum
        box.innerText += loremipsum
        box.innerText += loremipsum
      })
      document.onscroll = updateBackground
    })
  </script>
  <body>
    <nav style="position: fixed; top: 0; left: 0; width: 100vw;">
      <a href="#box1">box1</a> |
      <a href="#box2">box2</a> |
      <a href="#box3">box3</a> |
      <a href="#box4">box4</a> |
      <a href="#box5">box5</a>
    </nav>
    <div id="box1" class="box" data-bgcolor="fff"></div>
    <div id="box2" class="box" data-bgcolor="ff0"></div>
    <div id="box3" class="box" data-bgcolor="f00"></div>
    <div id="box4" class="box" data-bgcolor="f0f"></div>
    <div id="box5" class="box" data-bgcolor="0ff"></div>
  </body>
</html>
