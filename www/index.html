<!DOCTYPE html>
<html>
<head>
  <title>stigok u know</title>
  <link rel="stylesheet" href="love.css?ssc.evol">
  <script src="js/dollar.js"></script>
  <script src="js/req.js"></script>
  <script src="js/clipboard.js?compatability-mode"></script>
  <script src="js/hyperhtml.js"></script>
  <script src="love.js?foreal"></script>
  <script src="title.js?love"></script>
  <script>
    $(() => {
      const render = hyperHTML.bind(document.querySelector('#blogposts'))
      const staggered = []
      // Match the line length of the #about section
      const maxposts = $('pre')[0].innerText.trim().split(/[\r\n]+/g).length

      function staggerPosts (posts) {
        for (let i = 0; i < posts.length; i++) {
          setTimeout(() => {
            staggered.push(posts[i])
            update(render, staggered)
          }, 200 * i)
        }
      }

      getPosts(maxposts)
        .then(posts => staggerPosts(posts))
        .catch(() => {
          const posts = 'Failed to load real posts'
            .split(' ')
            .map(word => ({
              title: word,
              link: '#pleasecomebacklater!&lt;21'
            }))
          staggerPosts(posts)
        })

      //
      // Copy to clipboard for the public key
      //
      $('#publickey-clipboard').onclick = function () {
        const container = $('#publickey')
        const button = this
        const success = copyElementTextToClipboard(container)
        if (success) {
          setTimeout((text) => {
            button.innerText = text
            button.disabled = false
          }, 2000, button.innerText)
          button.innerText = 'Copied to clipboard!'
          button.disabled = true
        }
      }
    })

    function getPosts (count) {
      return new Promise((resolve, reject) => {
        req('https://blog.stigok.com/posts.json', (err, data) => {
          if (err) {
            reject(err)
            return
          }
          const posts = data.json
            .slice(0, count)
            .map(post => Object.assign(post, {
              link: 'https://blog.stigok.com/post/${post.slug}'
            }))
          resolve(posts)
        })
      })
    }

    function update (render, items) {
      render`${items.map(item => hyperHTML.wire(item)`
        <li><a href="${item.link}" title="${item.title}">${item.title}</a></li>
      `)}`
    }
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>stigok.com</h1>
    </header>
    <section>
      <img class="img-responsive" src="stigok.png">
    </section>
  </div>
  <div class="container">
    <div class="row">
      <div class="col col-50">
        <h2>about</h2>
        <pre>
train bjj
write code
think lots
ask questions
stay positive
get better
get faster
get stronger
fix problems
find love
get children
be a man
make music
share knowledge
no regrets
        </pre>
      </div>
      <div class="col col-50">
        <h2>latest blogposts</h2>
        <ul id="blogposts">
          <li>loading...</li>
        </ul>
      </div>
    </div>
    <h2>links and creations</h2>
    <div class="row">
      <div class="col col-50">
        <h3>stuff</h3>
        <ul>
          <li><a href="https://blog.stigok.com">blog.stigok.com</a></li>
        </ul>
      </div>
      <div class="col col-50">
        <h3>tools</h3>
        <ul>
          <li><a href="https://ip.42.fm" title='aka. "What is my IP"'>What is your IP address?</a></li>
        </ul>
      </div>
    </div>
    <section>
      <h2>contact</h2>
      <p>
        my e-mail address starts with stig and ends with my domain.
      </p>
      <h3>public key</h3>
      <p>
        <button type="button" id="publickey-clipboard">copy to clipboard</button>
        <a href="https://stigok.com/publickey.asc">download publickey.asc</a>
      </p>
      <textarea id="publickey">-----BEGIN PGP PUBLIC KEY BLOCK-----

mQENBFhSXtMBCADf1CGtevPBIHJOAJAAAAjJ1sL9fljguX+cv9xcWgZOr3qcBpAQ
XdLzzgeIGfTQznu2dNcntLwalTtAr9SI/Tb5iiQE+voffeuDogoifIrUWGnZsjyl
smN2zMWxXzJCNmGY2MlA3Y7fnS7WnRh3gXJbYqairuvLxFseHyPlzUtfi8VKJ2SQ
gDyzppLqtOerwnCQ7WD9ayMA2qkvNgR/br60F8LI+sSnccMItqPN7z/uwffkzIc+
e6SjpDKlt26P7d/74z2WuQ3BJfKL0DQteaA0nP7h0SLDZWvycPtSSI/gBoz7Nawn
HzwocyJ+jcyqlmPkP0QvQhF44OX0sY3qJF9LABEBAAG0JFN0aWcgT3RuZXMgS29s
c3RhZCA8c3RpZ0BzdGlnb2suY29tPokBTgQTAQgAOBYhBGRUizNv+1kxkN1GQn4L
CUCV8B5sBQJYUl7TAhsDBQsJCAcCBhUICQoLAgQWAgMBAh4BAheAAAoJEH4LCUCV
8B5slAIIALIz86QSuRMizNgj5UaC45U0DqgPuW8Qg6XVEynJ+vyr+EJ906FMRcWH
8iwYlwqUWVL6cJWC4p3Gr+2zICHjK+n+s/UTCeVxu9fCO+5w1m6knElHZugzJ1e0
0TuL37AQdF9Cc2maSDW+tffEG1LNb4f+dNMnj0jUvOazt/gKzcMge92th4IX76nz
swmoNmeRuD5T77R64juTYzc/Kdn2TR51jVp/CvAtWIgRQOQ08wnEiGDbMxjNYkxX
AHOLRTgwjidMpL2G53JoVRL823P9RO6zQbC/Uj2iPX+4yZXG0FURDTqImGujEKbI
9/ALw1vXIYTcpvFTKi0LPrj5sMSydrG5AQ0EWFJe0wEIAKowBODptHl+Bx/ocEYC
mKyO7ElGBbOcIt/Hp3YkWVWsBZzf4OhNOpkkwVxWwLLocEPsZo8eft66G3+Zdb3q
e1+p9781v7x/KIF+EG4oIb8YPslg+vefjT8s1QWvm9T8pqQiqdeqHcLnMpEHo5UJ
BTA92E6CiU91KsZdFrbnzLJ44px/t8u80MnbIGckCqMJ4foRQnRmsub2gJW7RE/T
0TnalfhECAmxmiN1VYbuV2M3QAne+22l1jMiOkMPjiP1Q8RxIqb1zHqtaZf3q0vJ
L7yEbZMvi72FLVorEAz0OJ6A0o+1ZlkdCPv9OQG+yxCom1VPcMXEdKZEL0oJUJRC
CRMAEQEAAYkBNgQYAQgAIBYhBGRUizNv+1kxkN1GQn4LCUCV8B5sBQJYUl7TAhsM
AAoJEH4LCUCV8B5sgb4H/2ahA5IHuj7oFgp+D4SABxMd1R9imaIQlICHgnPqhwc4
X6a5AH71uYbICiCftYoqpVRelpoYqkLTJiYtJdhJjX3Nt4PIf7S1SxLgDOuW1YoZ
Hw4sX3GsvzsoC1nxS18myPfpJb+lsshVI2ke0jeJp7q9Bq+Qur0dAxfUqmmwyw1U
sXklBrx1uEOedQIuWUt0sneiWOt3ngB5IMComfCdDmFLjHtACyRzQpICD5nY5a5V
XzFz6yYBfNVgk71YuFiKFwZbVrCApJQ640DpooausW1GUMO3rYJdoqFm2CWDl1PU
DEnj8No+Lvi7WoUXO8DJ1Ri+eT/QjqjJT1WNgN5YKDQ=
=AC9l
-----END PGP PUBLIC KEY BLOCK-----</textarea>
    </section>
    <footer>
      1 love, foreal
    </footer>
  </div>
</body>
</html>
