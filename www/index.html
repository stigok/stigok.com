<!DOCTYPE html>
<html class="nojs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>stigok u know</title>
  <link rel="stylesheet" href="css/love.css?ssc.evol/ssc">
  <script>
    document.getElementsByTagName('html')[0].classList.remove('nojs')
  </script>
  <script src="js/dollar.js"></script>
  <script src="js/req.js"></script>
  <script src="js/hyperhtml.js"></script>
  <script src="js/title.js?love"></script>
  <script src="projects/number-counter/main.js"></script>
  <script>
    $(() => {
      const maxposts = 5

      const render = hyperHTML.bind(document.querySelector('#blogposts'))
      function update (items) {
        render`${items.map(item => hyperHTML.wire(item)`
          <li class="staggered"><a href="${item.link}" title="${item.title}">${item.title}</a></li>
        `)}`
      }

      function stagger (arr, update) {
        const staggered = []
        for (let i = 0; i < arr.length; i++) {
          setTimeout(() => {
            staggered.push(arr[i])
            update(staggered)
          }, 200 * i)
        }
      }

      getPosts(maxposts)
        .then(posts => stagger(posts, update, render))
        .catch(() => {
          const posts = 'Failed to load real posts'
            .split(' ')
            .map(word => ({
              title: word,
              link: '#pleasecomebacklater!&lt;21'
            }))
          stagger(posts, update, render)
        })

      const screensUrl = 'https://public.42.fm/'
      const renderScreens = hyperHTML.bind(document.querySelector('#screens'))
      function updateScreens (screens) {
        renderScreens`${screens.map(screen => hyperHTML.wire(screen)`
          <li class="staggered"><a href="${screen.url}">${screen.name}</a></li>
        `)}`
      }
      req(screensUrl + '?json', (err, xhr) => {
        if (err) return console.error(err)
        console.log(xhr)
        const screens = xhr.json.map(url => ({
          url: screensUrl + url,
          name: url
        }))
        stagger(screens, updateScreens, renderScreens)
      })

      const renderMusic = hyperHTML.bind(document.querySelector('#tracks'))
      function updateMusic (data) {
        renderMusic`${data.map(item => hyperHTML.wire(item)`
          <li class="staggered"><a href="${item.url}">${item.name}</a></li>
        `)}`
      }
      req('/data/soundcloud-likes.json', (err, xhr) => {
        if (err) return console.error(err)
        const tracks = xhr.json.map(item => ({
          //name: `${item.user.username}: ${item.title}`,
          name: `${item.title}`,
          url: item.permalink_url
        }))
        stagger(tracks, updateMusic, renderMusic)
      })
    })

    function getPosts (count) {
      return new Promise((resolve, reject) => {
        req('https://blog.stigok.com/posts.json', (err, data) => {
          if (err) {
            reject(err)
            return
          }
          const posts = data.json
            .slice(0, count)
            .map(post => Object.assign(post, {
              link: `https://blog.stigok.com/post/${post.slug}`
            }))
          resolve(posts)
        })
      })
    }

    function getRandomInt (min, max) {
      return Math.floor(Math.random() * (max - min)) + min
    }
    function getRandomBlendMode (arr) {
      arr = 'color,color-burn,color-dodge,darken,difference,exclusion,hard-light,hue,lighten,luminosity,multiply,normal,overlay,saturation,screen,soft-light'.split(',')
      return arr[getRandomInt(0, arr.length)]
    }
    function toggleElementBlendMode () {
      this.style.backgroundBlendMode = getRandomBlendMode()
    }
    $(function () {
      var $banner = $('#banner')
      $banner.addEventListener('click', toggleElementBlendMode)
      $banner.style.cursor = 'pointer'
      toggleElementBlendMode.call($banner)
    })
  </script>
</head>
<body onfocus="I=21/7" onblur="I=4;look4luv(this)">
  <div class="container">
    <header id="header">
      <h1>stigok.com</h1>
    </header>
    <section id="banner"></section>
    <div id="about">
      <h2>about</h2>
      <ol>
        <li>be good</li>
        <li>be brave</li>
        <li>be free</li>
      </ol>
    </div>
    <div id="blogPosts">
      <h2>latest <a href="https://blog.stigok.com" title="blog.stigok.com">blog</a> posts</h2>
      <ul class="dashed" id="blogposts">
        <li>loading...</li>
      </ul>
    </div>
    <div id="pictures">
      <h2>pictures</h2>
      <ul class="dashed" id="screens">
        <li>loading...</li>
      </ul>
    </div>
    <div id="music">
      <h2>music I &amp;lt;21</h2>
      <ul class="dashed" id="tracks">
        <li>loading...</li>
      </ul>
    </div>
    <div id="links">
      <h2>links</h2>
      <ul>
        <li><a href="https://blog.stigok.com">blog.stigok.com</a></li>
        <li><a href="projects/box-shadow-box/index.html">css box-shadow box fun (?)</a></li>
      </ul>
    </div>
    <div id="projects">
      <h2>projects &amp; tools</h2>
      <ul>
        <li><a href="https://ip.42.fm">"What is my IP?"</a></li>
      </ul>
    </div>
    <div id="contact">
      <h2>contact</h2>
      <script>
        function sendMessage() {
          req(messageForm.action, {
            name: messageName.value,
            message: messageText.value
          }, function (text, xhr) {
            if (xhr && xhr.status === 201) {
              messageForm.disabled = true
              alert('message received!')
              messageForm.reset()
            } else {
              alert('message was not sent... (' + text + ')')
              console.error('Failed to send message', arguments)
            }
          })
        }
      </script>
      <p>
        Send me a private message here!
      </p>
      <form id="messageForm" action="https://stigok.com/api/v1/messages" encoding="application/json" method="post" onsubmit="sendMessage(); return false">
        <label for="messageName" class="sr-only">name</label>
        <input id="messageName" name="name" required placeholder="name / handle">
        <label for="messageText" class="sr-only">message</label>
        <textarea id="messageText" name="message" required placeholder="text" rows="4" cols="80"></textarea>
        <input type="submit" name="sendmsg" value="send private message">
      </form>
      <p>
        if you expect me to answer your message you should include some contact
        information of your own.
      </p>
      <p>
        alternatively, my <strong>e-mail</strong> address starts with
        <strong>stig@</strong> and ends with <strong>stigok.com</strong>.
      </p>
    </div>
    <div id="publicKey">
      <h2>public key</h2>
      <p>
        <a href="https://stigok.com/publickey.asc">publickey.asc</a>
      </p>
      <pre id="publickey">
-----BEGIN PGP PUBLIC KEY BLOCK-----
mQENBFhSXtMBCADf1CGtevPBIHJOAJAAAAjJ1sL9fljguX+cv9xcWgZOr3qcBpAQ
XdLzzgeIGfTQznu2dNcntLwalTtAr9SI/Tb5iiQE+voffeuDogoifIrUWGnZsjyl
smN2zMWxXzJCNmGY2MlA3Y7fnS7WnRh3gXJbYqairuvLxFseHyPlzUtfi8VKJ2SQ
gDyzppLqtOerwnCQ7WD9ayMA2qkvNgR/br60F8LI+sSnccMItqPN7z/uwffkzIc+
e6SjpDKlt26P7d/74z2WuQ3BJfKL0DQteaA0nP7h0SLDZWvycPtSSI/gBoz7Nawn
HzwocyJ+jcyqlmPkP0QvQhF44OX0sY3qJF9LABEBAAG0JFN0aWcgT3RuZXMgS29s
c3RhZCA8c3RpZ0BzdGlnb2suY29tPokBTgQTAQgAOBYhBGRUizNv+1kxkN1GQn4L
CUCV8B5sBQJYUl7TAhsDBQsJCAcCBhUICQoLAgQWAgMBAh4BAheAAAoJEH4LCUCV
8B5slAIIALIz86QSuRMizNgj5UaC45U0DqgPuW8Qg6XVEynJ+vyr+EJ906FMRcWH
8iwYlwqUWVL6cJWC4p3Gr+2zICHjK+n+s/UTCeVxu9fCO+5w1m6knElHZugzJ1e0
0TuL37AQdF9Cc2maSDW+tffEG1LNb4f+dNMnj0jUvOazt/gKzcMge92th4IX76nz
swmoNmeRuD5T77R64juTYzc/Kdn2TR51jVp/CvAtWIgRQOQ08wnEiGDbMxjNYkxX
AHOLRTgwjidMpL2G53JoVRL823P9RO6zQbC/Uj2iPX+4yZXG0FURDTqImGujEKbI
9/ALw1vXIYTcpvFTKi0LPrj5sMSydrG5AQ0EWFJe0wEIAKowBODptHl+Bx/ocEYC
mKyO7ElGBbOcIt/Hp3YkWVWsBZzf4OhNOpkkwVxWwLLocEPsZo8eft66G3+Zdb3q
e1+p9781v7x/KIF+EG4oIb8YPslg+vefjT8s1QWvm9T8pqQiqdeqHcLnMpEHo5UJ
BTA92E6CiU91KsZdFrbnzLJ44px/t8u80MnbIGckCqMJ4foRQnRmsub2gJW7RE/T
0TnalfhECAmxmiN1VYbuV2M3QAne+22l1jMiOkMPjiP1Q8RxIqb1zHqtaZf3q0vJ
L7yEbZMvi72FLVorEAz0OJ6A0o+1ZlkdCPv9OQG+yxCom1VPcMXEdKZEL0oJUJRC
CRMAEQEAAYkBNgQYAQgAIBYhBGRUizNv+1kxkN1GQn4LCUCV8B5sBQJYUl7TAhsM
AAoJEH4LCUCV8B5sgb4H/2ahA5IHuj7oFgp+D4SABxMd1R9imaIQlICHgnPqhwc4
X6a5AH71uYbICiCftYoqpVRelpoYqkLTJiYtJdhJjX3Nt4PIf7S1SxLgDOuW1YoZ
Hw4sX3GsvzsoC1nxS18myPfpJb+lsshVI2ke0jeJp7q9Bq+Qur0dAxfUqmmwyw1U
sXklBrx1uEOedQIuWUt0sneiWOt3ngB5IMComfCdDmFLjHtACyRzQpICD5nY5a5V
XzFz6yYBfNVgk71YuFiKFwZbVrCApJQ640DpooausW1GUMO3rYJdoqFm2CWDl1PU
DEnj8No+Lvi7WoUXO8DJ1Ri+eT/QjqjJT1WNgN5YKDQ=
=AC9l
-----END PGP PUBLIC KEY BLOCK-----</pre>
    </div>
  </div>
  <footer id="footer" class="container">
    1 love, foreal
  </footer>
</body>
</html>
